<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Treasure Run ‚Äî Neon Cyber Runner (Hybrid Menu)</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

<style>
  :root{
    --bg-1:#03040a;
    --bg-2:#060616;
    --neonA:#00e5ff;
    --neonB:#6a00ff;
    --accent:#00bfff;
    --muted:#9aa3b2;
    --panel: rgba(10,10,16,0.6);
  }

  /* Reset + base */
  *{box-sizing:border-box}
  html,body{height:100%;
    margin:0;
    background:linear-gradient(180deg,var(--bg-1),var(--bg-2));
    font-family:Inter,system-ui,Arial,sans-serif;
    color:#e9f6ff;
    overflow:hidden
  }

  a{color:inherit} button{font-family:inherit}
  ::selection{background:rgba(0,229,255,0.12)}

  /* ========== Canvas container ========== */
  /* The existing three.js renderer will append to #gameCanvas */
  #gameCanvas{
    position:absolute;
    inset:0;z-index:1;
    display:block;
    background:transparent}

  /* A faint vignette over the whole view to emphasize UI */
  .vignette{
    position:absolute;
    inset:0;
    pointer-events:none;
    z-index:140;
    background:radial-gradient(60% 40% at 50% 35%, rgba(0,0,0,0) 0%, rgba(0,0,0,0.18) 50%, rgba(0,0,0,0.45) 100%);
  }

  /* ========== HUD (floating) ========== */
  #hud{
    position:absolute;
    top:18px; left:50%;
    transform:translateX(-50%);
    z-index:210;
    display:flex;gap:12px;align-items:center;padding:8px 12px;border-radius:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(0,229,255,0.05);
    box-shadow:0 10px 30px rgba(0,0,0,0.6);backdrop-filter: blur(6px);
  }
  .hud-item{
    font-family:Orbitron,monospace;
    font-weight:700;padding:6px 8px;border-radius:8px
  }

  .hud-score{
    background:linear-gradient(90deg, rgba(0,229,255,0.05), rgba(106,0,255,0.03))
  }

  .hud-coins{
    background:linear-gradient(90deg, rgba(255,223,0,0.03), rgba(255,120,0,0.02))
  }

  .hud-high{
    font-size:14px;
    background:linear-gradient(90deg, rgba(0,255,170,0.02), rgba(0,191,255,0.02))
  }

  /* top right quick icons */
  #topControls{
    position:absolute;
    top:16px;
    right:16px;display:flex;gap:10px;
    z-index:210
  }
  .icon-btn{
    height:44px;
    width:44px;
    border-radius:10px;
    border:none;background:rgba(255,255,255,0.02);
    display:flex;
    align-items:center;
    justify-content:center;
    color:var(--neonA);cursor:pointer;
    font-size:18px;
    backdrop-filter: blur(6px);box-shadow:0 8px 20px rgba(0,0,0,0.6)
  }

  .icon-btn:hover{
    transform:translateY(-3px);transition:all .12s
  }

  /* ========== Main Menu ========== */
  #menu{
    position:absolute;
    inset:0;display:flex;
    align-items:center;
    justify-content:center;
    z-index:220;pointer-events:auto;
  }

  .menu-backdrop{
    position:absolute;
    inset:0;
    z-index:215;
    pointer-events:none;
    backdrop-filter: blur(6px) saturate(120%);
    background: linear-gradient(180deg, rgba(0,0,0,0.35), rgba(0,0,0,0.5));
    transition:opacity .35s ease;
  }

  /* The main panel with neon design */
  .menu-panel{
    position:relative;
    width:min(980px,94%);
    display:flex;
    gap:18px;
    align-items:stretch;
    padding:24px;
    border-radius:16px;
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border: 1px solid rgba(106,0,255,0.06);
    box-shadow: 0 40px 100px rgba(0,0,0,0.6), 0 0 40px rgba(0,64,100,0.03) inset;
    z-index:220;
  }

  /* left column: title / levels */
  .menu-left{
    flex:1;padding:6px 6px 6px 12px
  }

  .brand{
    display:flex;
    gap:12px;
    padding-bottom:30px;
    align-items:center;
  }
  .logo{
    width:72px;
    height:72px;
    border-radius:14px;
    background:linear-gradient(135deg,var(--neonA),var(--neonB));
    display:flex;
    align-items:center;
    justify-content:center;
    font-family:Orbitron;
    font-weight:800;
    color:#001018;
    font-size:28px;
    box-shadow:0 6px 30px rgba(0,229,255,0.06)
  }

  .title{
    font-family:Orbitron,monospace;
    font-size:40px;
    color:var(--neonA);margin:0
  }

  .subtitle{
    color:var(--muted);
    font-size:13px;margin-top:6px
  }

  .level-grid{
    display:flex;
    gap:12px;
    margin-top:18px;
    flex-wrap:wrap
  }

  .level-btn{
    position: relative;
    overflow: hidden;
    min-width:120px;
    padding:12px 16px
    ;border-radius:12px;
    border:none;
    background:linear-gradient(180deg,#ffb84d,#ff8c00);
    color:#10060a;
    font-weight:800;
    cursor:pointer;
    box-shadow:0 12px 30px rgba(255,140,0,0.12);
    transition:transform .12s, box-shadow .12s;
    font-size:15px;
  }

.level-best {
  font-size: 13px;
  opacity: 0.7;
  margin-top: 4px;
}

.level-lock {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.55);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
  color: #fff;
  transition: opacity 0.4s ease;
}

.level-btn.locked {
  filter: grayscale(1);
  pointer-events: none;
}

.level-btn.unlocked {
  animation: unlockPop 0.6s ease-out;
  box-shadow: 0 0 25px rgba(0,229,255,0.9);
}

@keyframes unlockPop {
  0% { transform: scale(0.8); }
  60% { transform: scale(1.15); }
  100% { transform: scale(1); }
}

  .level-btn:hover{
    transform:translateY(-6px);box-shadow:0 20px 44px rgba(255,140,0,0.18)
  }

  .menu-right{
    width:360px;
    min-width:260px;
    padding:6px;
    border-left:1px solid rgba(255,255,255,0.02);
    display:flex;
    flex-direction:column;
    gap:12px;
    align-items:center
  }

  .menu-actions{
    display:flex;
    flex-direction:column;
    gap:10px;
    width:100%;
  }

  .btn{
    padding:12px 16px;
    border-radius:12px;
    border:none;
    background:linear-gradient(90deg,var(--neonA),var(--neonB));
    color:#021219;
    font-weight:700;
    cursor:pointer;
    font-size:16px;
    box-shadow:0 12px 30px rgba(0,229,255,0.06);
  }

  .btn:hover{
    transform:translateY(-6px);
    transition:all .12s
  }

  .preview-box{
    width:100%;
    height:150px;
    border-radius:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
  }

  .preview-cube{
    width:56px;
    height:56px;
    border-radius:8px;
    margin-top:6px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:28px;
    font-family:Orbitron
  }

  .small-muted{
    color:var(--muted);
    font-size:13px;
    text-align:center
  }

  /* ========== Modal windows ========== */
  .modal{
    display:none;
    position:fixed;
    left:50%;
    top:50%;
    transform:translate(-50%,-50%);
    z-index:250;
    min-width:320px;
    max-width:96%;
    width:460px;
    padding:16px;
    border-radius:12px;
    background:linear-gradient(180deg, rgba(10,10,12,0.96), rgba(8,8,12,0.94));
    border:1px solid rgba(106,0,255,0.06);box-shadow:0 30px 90px rgba(0,0,0,0.7)
  }

  .modal h2{
    margin:0 0 10px;
    font-family:Orbitron;
    color:var(--neonB)
  }

  .char-btn{
    width:100%;
    padding:10px;
    margin:8px 0;
    border-radius:10px;
    border:1px solid rgba(255,255,255,0.03);background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    cursor:pointer;
    font-weight:600
  }

  .char-btn:hover{
    transform:translateY(-3px);box-shadow:0 12px 36px rgba(0,0,0,0.5)
  }

  .shop-preview{
    width:84px;
    height:84px;
    border-radius:12px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:34px;
    font-family:Orbitron;
    background:linear-gradient(135deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(255,255,255,0.03)
  }

  .char-btn {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.shop-coins{
  margin-bottom:12px;
  font-family:Orbitron;
  color:#ffd000;
}

#shopGrid{
  display:grid;
  grid-template-columns: repeat(auto-fill,minmax(140px,1fr));
  gap:14px;
}

.shop-card{
  position:relative;
  padding:14px;
  border-radius:14px;
  background:linear-gradient(180deg,rgba(255,255,255,0.03),rgba(255,255,255,0.01));
  border:1px solid rgba(255,255,255,0.06);
  cursor:pointer;
  transition:transform .2s, box-shadow .2s;
}

.shop-card:hover{
  transform:translateY(-6px);
  box-shadow:0 20px 40px rgba(0,0,0,0.6);
}

.skin-preview{
  width:56px;
  height:56px;
  border-radius:12px;
  margin:auto;
  box-shadow:0 0 18px rgba(0,0,0,0.5);
}

.skin-info{
  text-align:center;
  margin-top:10px;
}

.skin-name{
  font-weight:700;
}

.skin-price{
  font-size:13px;
  color:#ffd000;
}

.skin-action{
  margin-top:10px;
  padding:6px;
  border-radius:8px;
  text-align:center;
  font-size:12px;
  background:rgba(255,255,255,0.12);
}

/* STATES */
.shop-card.owned .skin-action{
  background:rgba(0,255,170,0.25);
  color:#00ffcc;
}

.shop-card.selected{
  outline:2px solid #00e5ff;
  box-shadow:0 0 25px #00e5ff;
}

.shop-card.selected .skin-action{
  background:#00e5ff;
  color:#001018;
  font-weight:bold;
}

  /* ========== Pause menu overlay ========== */
  #pauseMenu{
    display:none;
    position:fixed;
    inset:0;
    z-index:260;
    display:flex;
    align-items:center;
    justify-content:center;
    background:linear-gradient(180deg, rgba(1,4,8,0.55), rgba(2,6,12,0.72));
    backdrop-filter: blur(6px)
  }

  .pause-card{
    width:360px;
    padding:22px;
    border-radius:14px;
    text-align:center;
    background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border:1px solid rgba(0,229,255,0.06)
  }

  .pause-title{
    font-family:Orbitron;
    font-size:26px;
    margin-bottom:12px;color:var(--neonA)
  }

  /* ========== Progress bar ========== */
  #progressBarContainer{
    position:absolute;
    top:115px;left:50%;
    transform:translateX(-50%);
    height:14px;
    width:44%;
    min-width:240px;
    max-width:560px;
    border-radius:10px;
    overflow:hidden;
    border:1px solid rgba(255,255,255,0.03);
    z-index:205;background:rgba(0,0,0,0.25)
  }

  #progressBar{
    height:100%;
    width:0;
    background:linear-gradient(90deg,var(--neonA),var(--neonB));
    box-shadow:0 10px 30px rgba(106,0,255,0.06)
  }

  #progressPercent{
    position:absolute;
    top:95px;left:50%;
    transform:translateX(-50%);
    font-family:Orbitron;
    font-size:13px;color:var(--muted);z-index:205
  }

  .level-progress {
  width: 100%;
  height: 6px;
  margin-top: 6px;
  background: rgba(255,255,255,0.15);
  border-radius: 6px;
  overflow: hidden;
}

.level-progress-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #00e5ff, #6a00ff);
  box-shadow: 0 0 10px rgba(0,229,255,0.8);
  transition: width 0.4s ease;
}

.unlock-particle {
  position: fixed;
  width: 6px;
  height: 6px;
  background: #00e5ff;
  border-radius: 50%;
  pointer-events: none;
  z-index: 999;
  box-shadow:
    0 0 6px #00e5ff,
    0 0 12px #6a00ff;
}

#newBestBadge {
    position: absolute;
    top: 70px;
    right: 20px;
    padding: 8px 14px;
    border-radius: 12px;
    font-family: Orbitron, sans-serif;
    font-weight: bold;
    font-size: 14px;
    color: #00e5ff;
    background: rgba(0, 229, 255, 0.15);
    border: 2px solid #00e5ff;
    box-shadow: 0 0 12px #00e5ff;
    display: none;
    animation: popIn 0.4s ease-out, pulseGlow 1.2s infinite alternate;
}

@keyframes popIn {
    0% { transform: scale(0.2); opacity: 0; }
    100% { transform: scale(1); opacity: 1; }
}

@keyframes pulseGlow {
    from { box-shadow: 0 0 10px #00e5ff; }
    to { box-shadow: 0 0 28px #00e5ff; }
}

  @media (max-width:920px){
    .menu-panel{flex-direction:column;padding:16px}
    .menu-right{width:100%;border-left:none;border-top:1px solid rgba(255,255,255,0.02);padding-top:14px}
    .logo{width:56px;height:56px;font-size:22px}
    .title{font-size:30px}
    #progressBarContainer{width:84%}
  }
  @media (max-width:480px){
    .title{font-size:22px}
    .level-btn{min-width:92px;padding:10px 12px;font-size:14px}
    .menu-panel{padding:10px}
    .menu-right{padding:10px}
    #hud{top:8px;padding:6px 8px}
  }
</style>
</head>
<body>
  <div id="gameCanvas" aria-hidden="true"></div>
  <div class="vignette" aria-hidden="true"></div>

  <!-- HUD -->
  <div id="hud" aria-live="polite">
    <div class="hud-item hud-score" id="score">Score: 0</div>
    <div class="hud-item hud-coins" id="coins">Coins: 0</div>
    <div class="hud-item hud-high" id="highScore">High Score: 0</div>
    <div id="newBestBadge">NEW BEST!</div>
    <div id="hudParticles"></div>
  </div>

  <div id="topControls">
    <button class="icon-btn" id="pauseBtn" title="Pause" aria-label="Pause Game" style="display:none">‚è∏</button>
  </div>

  <!-- ====== Main menu ====== -->
  <div id="menu" role="dialog" aria-modal="true" aria-label="Main menu">
    <div class="menu-backdrop" id="menuBackdrop" aria-hidden="true"></div>

    <div class="menu-panel" role="document">
      <div class="menu-left">
        <div class="brand">
          <div class="logo" aria-hidden="true">GR</div>
          <div>
            <div class="title">Geometry Run</div>
          </div>
        </div>

        <div class="small-muted" style="margin-top:10px;font-family:Orbitron;font-size:18px;color:var(--neonB)">Select level</div>
        <div class="level-grid" id="levelSelect" style="margin-top:12px">
          <button class="level-btn" data-level="1">Level 1   <div class="level-best" id="best-level-1">Best Run: 0 </div> <div class="level-progress">
          <div class="level-progress-fill" id="level-progress-1"></div></button>
          <button class="level-btn" data-level="2">Level 2  <div class="level-best" id="best-level-2">Best Run: 0</div> <div class="level-progress">
          <div class="level-progress-fill" id="level-progress-2"></div> <div class="level-lock">üîí</div></button>
          <button class="level-btn" data-level="3">Level 3   <div class="level-best" id="best-level-3">Best Run: 0</div> <div class="level-progress">
          <div class="level-progress-fill" id="level-progress-3"></div> <div class="level-lock">üîí</div></button>
          <button class="level-btn" data-level="4">Level 4   <div class="level-best" id="best-level-4">Best Run: 0</div> <div class="level-progress">
          <div class="level-progress-fill" id="level-progress-4"></div> <div class="level-lock">üîí</div></button>
          <button class="level-btn" data-level="5">Level 5   <div class="level-best" id="best-level-5">Best Run: 0</div> <div class="level-progress">
          <div class="level-progress-fill" id="level-progress-5"></div> <div class="level-lock">üîí</div></button>
        </div>

        <div style="margin-top:14px" class="small-muted">Controls: ‚Üê ‚Üí lanes ‚Ä¢ Space jump ‚Ä¢ Swipe on mobile</div>
      </div>

      <div class="menu-right" aria-hidden="false">
        <div style="width:100%;text-align:center;margin-bottom:6px">
          <div style="font-family:Orbitron;font-size:18px;color:var(--neonB)">Quick Actions</div>
        </div>

        <div class="menu-actions">
          <button class="btn" id="shopBtnAlt">Shop</button>
          <button class="btn" id="settingsBtnAlt">Settings</button>
              <div style="display:flex;gap:8px;justify-content:center;margin-top:12px">
          <button class="btn" id="aboutBtn" style=background:linear-gradient(90deg,#6a00ff,#00e5ff)">
            About
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- ====== Shop Modal ====== -->
  <div id="shopMenu" class="modal" role="dialog" aria-modal="true" aria-labelledby="shopTitle">

    <h2 id="shopTitle">Character Shop</h2>
  <div id="coinsOwned" class="shop-coins">Coins: 0</div>

  <div id="shopGrid">

    <div class="shop-card owned selected"
        data-id="default"
        data-cost="0"
        data-color="0x00e5ff">
      <div class="skin-preview" style="background:#00e5ff"></div>
      <div class="skin-info">
        <div class="skin-name">Default</div>
        <div class="skin-price">FREE</div>
      </div>
      <div class="skin-action">SELECTED</div>
    </div>

  <div class="shop-card"
       data-id="red"
       data-cost="20"
       data-color="0xff3333">
    <div class="skin-preview" style="background:#ff3333"></div>
    <div class="skin-info">
      <div class="skin-name">Red</div>
      <div class="skin-price">20 ü™ô</div>
    </div>
    <div class="skin-action">BUY</div>
  </div>

  <div class="shop-card"
       data-id="purple"
       data-cost="30"
       data-color="0x9b5cff">
    <div class="skin-preview" style="background:#9b5cff"></div>
    <div class="skin-info">
      <div class="skin-name">Purple</div>
      <div class="skin-price">30 ü™ô</div>
    </div>
    <div class="skin-action">BUY</div>
  </div>

  <div class="shop-card"
       data-id="orange"
       data-cost="40"
       data-color="0xff9f1c">
    <div class="skin-preview" style="background:#ff9f1c"></div>
    <div class="skin-info">
      <div class="skin-name">Orange</div>
      <div class="skin-price">40 ü™ô</div>
    </div>
    <div class="skin-action">BUY</div>
  </div>

  <div class="shop-card"
       data-id="green"
       data-cost="25"
       data-color="0x00ff88">
    <div class="skin-preview" style="background:#00ff88"></div>
    <div class="skin-info">
      <div class="skin-name">Green</div>
      <div class="skin-price">25 ü™ô</div>
    </div>
    <div class="skin-action">BUY</div>
  </div>
</div>


    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
      <button class="btn" id="closeShopBtn" style="background:#444">Close</button>
    </div>
  </div>

  <!-- ====== Settings Modal ====== -->
  <div id="settingsMenu" class="modal" role="dialog" aria-modal="true" aria-labelledby="settingsTitle">
    <h2 id="settingsTitle">Settings</h2>
    <div style="margin-top:10px">
      <div class="row" style="align-items:center;margin-bottom:10px"><label style="width:90px">Music</label><input id="musicRange" type="range" min="0" max="1" step="0.05" value="0.5"></div>
      <div class="row" style="align-items:center;margin-bottom:10px"><label style="width:90px">SFX</label><input id="sfxRange" type="range" min="0" max="1" step="0.05" value="1"></div>
      <div class="row" style="align-items:center;margin-bottom:10px"><label style="width:90px">Sensitivity</label><input id="sensitivityRange" type="range" min="0.5" max="2" step="0.1" value="1"></div>
    </div>
    <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px">
      <button class="btn" id="closeSettingsBtn" style="background:#444">Close</button>
    </div>
  </div>

  <!-- ====== About / Story Modal ====== -->
<div id="aboutMenu" class="modal" role="dialog" aria-modal="true" aria-labelledby="aboutTitle">
  <h2 id="aboutTitle">About Geometry Run</h2>

  <p style="text-align:justify;font-size:14px;line-height:1.6;color:#cfd8ff">
    Geometry Run is set in a futuristic digital world known as the Neon Grid.
    After a system failure fractured its core pathways, a single energy sphere
    was deployed to restore balance. Players navigate unstable zones, avoid
    corrupted structures, and collect energy fragments to stabilize each sector.
    Each level represents a recovered segment of the system, with increasing
    threats and challenges. The game combines fast-paced runner mechanics with
    a cyber sci-fi adventure theme, emphasizing progression, exploration, and
    survival within a collapsing digital environment.
  </p>

  <div style="display:flex;justify-content:flex-end;margin-top:12px">
    <button class="btn" id="closeAboutBtn" style="background:#444">Close</button>
  </div>
</div>
  
  <!-- ====== Pause overlay ====== -->
  <div id="pauseMenu" role="dialog" aria-modal="true" style="display:none">
    <div class="pause-card">
      <div class="pause-title" id="pauseTitle">Paused</div>
      <div style="display:flex;gap:10px;justify-content:center">
        <button id="resumeBtn" class="btn" style="background:linear-gradient(90deg,#00e58a,#00bfff)">Resume</button>
        <button id="restartBtn" class="btn" style="background:linear-gradient(90deg,#ff7a7a,#ff5252)">Restart</button>
        <button id="menuBtn" class="btn" style="background:linear-gradient(90deg,#7a8cff,#00bfff)">Main Menu</button>
      </div>
    </div>
  </div>

  <div id="progressBarContainer"><div id="progressBar"></div></div>
  <div id="progressPercent">0%</div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="script.js"></script>
</body>
</html>