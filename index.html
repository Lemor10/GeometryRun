<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Treasure Run ‚Äî Enhanced</title>
<style>
  :root{--bg:#111;--accent:#00bfff}
  html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif;background:var(--bg);color:#fff;overflow:hidden}
  /* HUD */
  #hud{position:absolute;top:56px;left:50%;transform:translateX(-50%);z-index:50;display:none;text-align:center}
  #hud div{font-size:18px;margin-bottom:6px;text-shadow:0 2px 6px rgba(0,0,0,0.7)}
  /* Main Menu */
  #menu{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background:linear-gradient(135deg,#060606,#222);z-index:60}
  #menu h1{font-size:56px;margin:0 0 18px;color:var(--accent);text-shadow:0 4px 12px rgba(0,0,0,.8);animation:glow 2s infinite alternate}
  @keyframes glow{0%{text-shadow:0 0 5px #00bfff,0 0 10px #00bfff}100%{text-shadow:0 0 20px #00ffff,0 0 40px #00ffff}}
  .btn{padding:12px 22px;margin:8px;border-radius:12px;border:none;background:linear-gradient(45deg,#00bfff,#0099ff);color:#fff;font-size:18px;cursor:pointer;transition:transform .15s,box-shadow .2s;box-shadow:0 4px 8px rgba(0,0,0,.5)}
  .btn:hover{transform:scale(1.05)}
  .level-btn{background:#ff9900;padding:10px 14px;border-radius:10px;font-size:16;cursor:pointer}
  /* Shop */
  #shopMenu,#settingsMenu{display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#222;padding:18px;border-radius:12px;color:#fff;width:360px;z-index:120}
  .char-btn{margin:8px 0;padding:10px;border-radius:8px;border:none;width:100%;cursor:pointer;font-size:16}
  /* Pause */
  #pauseBtn{position:absolute;top:18px;right:18px;padding:10px 12px;border-radius:8px;border:none;background:#ffaa00;color:#fff;font-size:14px;display:none;z-index:70;cursor:pointer}
  #pauseMenu{position:absolute;inset:0;display:none;flex-direction:column;justify-content:center;align-items:center;background:rgba(0,0,0,.8);z-index:140}
  #pauseMenu h2{font-size:34px;margin-bottom:18px}
  /* Progress */
  #progressBarContainer{position:absolute;top:8px;left:50%;transform:translateX(-50%);height:18px;width:320px;border:2px solid #fff;border-radius:10px;overflow:hidden;z-index:80}
  #progressBar{height:100%;width:0;background:#00ff00}
  #progressPercent{position:absolute;top:-22px;left:50%;transform:translateX(-50%);font-weight:bold}
  /* small helpers */
  .row{display:flex;gap:8px;align-items:center}
  label{font-size:14px}
  input[type=range]{width:200px}
  /* responsive */
  @media (max-width:480px){#menu h1{font-size:36px}.btn{font-size:16px}}
</style>
</head>
<body>
  <!-- Main Menu -->
  <div id="menu">
    <h1>Treasure Run</h1>
    <div id="levelSelect">
      <button class="level-btn" data-level="1">Level 1</button>
      <button class="level-btn" data-level="2">Level 2</button>
      <button class="level-btn" data-level="3">Level 3</button>
    </div>
    <div style="margin-top:14px">
      <button class="btn" id="shopBtn">Shop</button>
      <button class="btn" id="settingsBtn">Settings</button>
    </div>
    <div style="margin-top:10px;color:#aaa;font-size:14px">Use ‚Üê ‚Üí to change lanes, space to jump. Swipe on mobile.</div>
  </div>

  <!-- Shop Menu -->
  <div id="shopMenu">
    <h2>Shop</h2>
    <div id="coinsOwned">Coins: 0</div>
    <div id="characters">
      <button class="char-btn" data-cost="10" data-color="0x00ff00" data-face="üôÇ">Green Cube - 10 Coins üôÇ</button>
      <button class="char-btn" data-cost="25" data-color="0xff00ff" data-face="üòé">Magenta Cube - 25 Coins üòé</button>
      <button class="char-btn" data-cost="50" data-color="0x00ffff" data-face="ü§ñ">Cyan Cube - 50 Coins ü§ñ</button>
    </div>
    <div style="margin-top:12px"><button class="btn" id="closeShopBtn">Close</button></div>
  </div>

  <!-- Settings Menu -->
  <div id="settingsMenu">
    <h2>Settings</h2>
    <div class="row" style="margin-bottom:8px"><label>Music</label><input id="musicRange" type="range" min="0" max="1" step="0.05" value="0.5"></div>
    <div class="row" style="margin-bottom:8px"><label>SFX</label><input id="sfxRange" type="range" min="0" max="1" step="0.05" value="1"></div>
    <div class="row" style="margin-bottom:8px"><label>Sensitivity</label><input id="sensitivityRange" type="range" min="0.5" max="2" step="0.1" value="1"></div>
    <div style="margin-top:10px"><button class="btn" id="closeSettingsBtn">Close</button></div>
  </div>

  <!-- HUD -->
  <div id="hud">
    <div id="score">Score: 0</div>
    <div id="coins">Coins: 0</div>
  </div>

  <!-- Pause Button and Menu -->
  <button id="pauseBtn">Pause</button>
  <div id="pauseMenu">
    <h2 id="pauseTitle">Paused</h2>
    <div style="display:flex;gap:12px">
      <button id="resumeBtn" class="btn" style="background:#00cc66">Resume</button>
      <button id="restartBtn" class="btn" style="background:#ff4444">Restart</button>
      <button id="menuBtn" class="btn" style="background:#0099ff">Main Menu</button>
    </div>
  </div>

  <!-- Progress Bar -->
  <div id="progressBarContainer"><div id="progressBar"></div></div>
  <div id="progressPercent">0%</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="script.js"></script>
<script>
  // Level buttons
  document.querySelectorAll('.level-btn').forEach(btn=>{
    btn.addEventListener('click',()=>{ 
      const level=parseInt(btn.dataset.level);
      startGame(level);
    });
  });

  // Shop buttons
  document.getElementById('shopBtn').addEventListener('click',()=>openShop());
  document.getElementById('closeShopBtn').addEventListener('click',()=>closeShop());

  // Settings buttons
  document.getElementById('settingsBtn').addEventListener('click',()=>openSettings());
  document.getElementById('closeSettingsBtn').addEventListener('click',()=>closeSettings());
</script>
</body>
</html>
